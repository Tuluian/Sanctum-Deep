# Story 9.3: Potion-Generating Cards

## Status: Draft

## Story

**As a** player building strategic decks,
**I want** cards that generate Health Potions for later use,
**so that** I can plan healing across multiple turns/combats.

## Acceptance Criteria

1. New effect type: GENERATE_POTION creates potions during combat
2. Generated potions go to player's potion slots
3. Basic implementation: card deals damage AND generates potion
4. Potions persist after combat (standard potion behavior)
5. Cannot exceed max potion slots (3 default)
6. At least 3 potion-generating cards across different classes

## Example Card Designs

### Cleric - "Blessed Vial"
- Cost: 1 Resolve
- Effect: Deal 2 damage. Generate a Minor Healing Potion.
- Rarity: Common

### Dungeon Knight - "Salvage"
- Cost: 1 Resolve
- Effect: Gain 4 Block. If you have Fortify, generate a Minor Healing Potion.
- Rarity: Uncommon

### Diabolist - "Blood Tithe"
- Cost: 0 Resolve
- Effect: Lose 3 HP. Generate a Health Potion.
- Rarity: Uncommon

## Tasks / Subtasks

- [ ] Add GENERATE_POTION effect type (AC: 1)
  - [ ] Define in types/index.ts
  - [ ] Implement in CombatEngine
- [ ] Handle potion slot logic (AC: 2, 5)
  - [ ] Check available slots
  - [ ] Add to player potions
  - [ ] Fail gracefully if full (maybe gain gold instead?)
- [ ] Create card definitions (AC: 3, 6)
  - [ ] Blessed Vial (Cleric)
  - [ ] Salvage (Dungeon Knight)
  - [ ] Blood Tithe (Diabolist)
- [ ] Verify potion persistence (AC: 4)
- [ ] UI feedback for potion generation (AC: 2)
  - [ ] Animation/notification

## Dev Notes

### Potion Types to Generate
- Minor Healing Potion (heal 10 HP)
- Health Potion (heal 20 HP)
- Could expand to other potion types later

### Design Philosophy
- Potion generation is a setup mechanic
- Trade immediate power for future flexibility
- Synergizes with longer fights and multi-combat strategies

### Relevant Files
- `src/types/index.ts` - effect types
- `src/engine/CombatEngine.ts` - effect processing
- `src/data/cards/` - card definitions
- `src/data/potions.ts` - potion definitions

### Testing
- Test potion generation
- Test slot limit
- Test persistence after combat

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-04 | 1.0 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

_To be filled by Dev agent_

---

## QA Results

_To be filled by QA agent_
