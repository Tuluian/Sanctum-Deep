# Story 9.2: Between-Run Card Draw System

## Status: Draft

## Story

**As a** player completing a run,
**I want** to draw/unlock new cards between runs,
**so that** there's meta-progression and incentive to continue playing.

## Acceptance Criteria

1. After each run (win or lose), player receives card draw opportunity
2. Card draw pool is based on class and progression
3. Drawn cards are added to player's permanent collection
4. Cards in collection can be used in future run deck building
5. Clear UI shows card draw screen after run ends
6. Progress is saved to localStorage (MVP) or cloud (future)
7. Duplicate cards provide some benefit (upgrade currency?)

## Tasks / Subtasks

- [ ] Design card collection system (AC: 3, 4)
  - [ ] Define collection data structure
  - [ ] Track owned cards per class
- [ ] Create card draw mechanic (AC: 1, 2)
  - [ ] Determine draw quantity (3 cards? Pick 1 of 3?)
  - [ ] Pool filtering by class/rarity
  - [ ] Random selection algorithm
- [ ] Build card draw UI (AC: 5)
  - [ ] Post-run card draw screen
  - [ ] Card reveal animation
  - [ ] Add to collection confirmation
- [ ] Integrate with save system (AC: 6)
  - [ ] Save collection to localStorage
  - [ ] Load collection on game start
- [ ] Handle duplicates (AC: 7)
  - [ ] Option A: Convert to upgrade currency
  - [ ] Option B: Track card "levels" for upgrades
  - [ ] Option C: Skip duplicates, redraw

## Dev Notes

### Meta-Progression Design
This is the first step toward meta-progression between runs. Options:
1. **Card Unlocks** - Start with limited pool, unlock more over time
2. **Collection Building** - Own cards, build custom starter decks
3. **Hybrid** - Unlock access, then collect for upgrades

### MVP Recommendation
- After each run: Show 3 cards, pick 1 to add to collection
- Collection unlocks cards for future deck-building options
- Simple localStorage persistence

### Future Considerations
- Cloud saves for cross-device
- Achievements that unlock specific cards
- Daily/weekly card draws

### Relevant Files
- `src/services/SaveService.ts` - persistence
- `src/ui/screens/` - new CardDrawScreen
- `src/data/cards/` - card pools

### Testing
- Test draw after win
- Test draw after loss
- Test collection persistence

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-04 | 1.0 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

_To be filled by Dev agent_

---

## QA Results

_To be filled by QA agent_
