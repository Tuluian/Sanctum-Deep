# Story 13.2: iOS UI Adaptations

## Status: Draft

## Story

**As a** mobile player,
**I want** the game UI optimized for touch and iOS screen sizes,
**so that** gameplay feels native and comfortable on iPhone/iPad.

## Acceptance Criteria

1. Safe area insets respected (notch, home indicator)
2. Touch targets meet iOS HIG (44pt minimum)
3. Cards are easily tappable and draggable on touch
4. UI scales properly on iPhone SE through iPad Pro
5. Landscape orientation locked (or both orientations supported gracefully)
6. No text/elements cut off on any supported screen size
7. Haptic feedback on card plays and important actions
8. Keyboard doesn't obscure content (if text input exists)

## Tasks / Subtasks

- [ ] Install Capacitor plugins (AC: 7)
  - [ ] `npm install @capacitor/haptics`
  - [ ] `npm install @capacitor/status-bar`
  - [ ] `npm install @capacitor/keyboard` (if needed)
- [ ] Implement safe area handling (AC: 1)
  - [ ] Use CSS `env(safe-area-inset-*)` variables
  - [ ] Test on notched devices (iPhone X+)
  - [ ] Ensure game content not obscured
- [ ] Touch optimization (AC: 2, 3)
  - [ ] Increase card hit areas for touch
  - [ ] Add touch feedback states (pressed/released)
  - [ ] Test card dragging on touch
  - [ ] Ensure buttons meet 44pt minimum
- [ ] Responsive scaling (AC: 4, 6)
  - [ ] Test on iPhone SE (smallest)
  - [ ] Test on iPhone 15 Pro Max (largest phone)
  - [ ] Test on iPad (different aspect ratio)
  - [ ] Fix any text/element overflow issues
- [ ] Orientation handling (AC: 5)
  - [ ] Decide: landscape-only or both?
  - [ ] Lock orientation in Xcode if needed
  - [ ] Handle orientation changes gracefully
- [ ] Haptic integration (AC: 7)
  - [ ] Haptic on card play
  - [ ] Haptic on damage dealt/received
  - [ ] Haptic on turn change
  - [ ] Haptic on victory/defeat
- [ ] Status bar configuration
  - [ ] Set status bar style (light/dark)
  - [ ] Optional: hide during gameplay

## Dev Notes

### Safe Area CSS

```css
.game-container {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}
```

### Haptics Implementation

```typescript
import { Haptics, ImpactStyle } from '@capacitor/haptics';

// Light tap for card selection
await Haptics.impact({ style: ImpactStyle.Light });

// Medium for card play
await Haptics.impact({ style: ImpactStyle.Medium });

// Heavy for damage/important events
await Haptics.impact({ style: ImpactStyle.Heavy });

// Notification for victory/defeat
await Haptics.notification({ type: 'success' });
await Haptics.notification({ type: 'error' });
```

### Touch Target Guidelines
- Minimum tap target: 44x44 points (Apple HIG)
- Cards should have generous tap areas
- Space between interactive elements: 8pt minimum
- Consider "fat finger" problem with small targets

### Screen Size Reference
| Device | Width | Height | Aspect |
|--------|-------|--------|--------|
| iPhone SE | 375pt | 667pt | 16:9 |
| iPhone 15 | 393pt | 852pt | 19.5:9 |
| iPhone 15 Pro Max | 430pt | 932pt | 19.5:9 |
| iPad 10th Gen | 820pt | 1180pt | 4:3 |
| iPad Pro 12.9" | 1024pt | 1366pt | 4:3 |

### Relevant Files
- `src/styles/main.css` - add safe area and responsive rules
- `src/ui/renderer.ts` - touch event handling
- `src/services/HapticsService.ts` (new) - haptic wrapper

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-04 | 1.0 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

_To be filled by Dev agent_

---

## QA Results

_To be filled by QA agent_
