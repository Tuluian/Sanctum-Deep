# Story 8.1: Summon Mechanics Fix

## Status: Draft

## Story

**As a** player fighting bosses and elites,
**I want** enemy summon abilities to function correctly on round 1 and throughout combat,
**so that** combat encounters work as designed and provide the intended challenge.

## Acceptance Criteria

1. High Cultist's summon ability works correctly on round 1
2. Bonelord's round 1 summon ability functions properly
3. All phase-based summons continue to work (Phase 3 confirmed working)
4. Summoned minions appear with correct HP and move sets
5. Combat engine correctly processes summon intents during any round
6. Unit tests verify summon functionality across all combat phases

## Tasks / Subtasks

- [ ] Investigate High Cultist summon failure (AC: 1)
  - [ ] Reproduce the bug
  - [ ] Trace CombatEngine summon logic for round 1
  - [ ] Identify why round 1 differs from later rounds
- [ ] Investigate Bonelord round 1 summon failure (AC: 2)
  - [ ] Check phase threshold logic
  - [ ] Verify move selection includes summon on round 1
- [ ] Fix CombatEngine summon processing (AC: 1, 2, 5)
  - [ ] Ensure summon intents processed regardless of turn number
  - [ ] Verify enemy array correctly receives new summons
- [ ] Add unit tests for round 1 summons (AC: 6)
- [ ] Regression test phase 3 summons still work (AC: 3)

## Dev Notes

### Bug Context
- Phase 3 summons work correctly, suggesting the summon mechanic itself is functional
- Issue appears specific to round 1 / initial combat state
- May be related to combat initialization sequence

### Relevant Files
- `src/engine/CombatEngine.ts` - processEnemyTurn, summon handling
- `src/data/enemies/act1-boss.ts` - Bonelord definition
- `src/data/enemies/act1-elites.ts` - High Cultist definition

### Testing
- Test file: `src/engine/CombatEngine.test.ts`
- Add tests for: `should process summon intent on round 1`

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-04 | 1.0 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

_To be filled by Dev agent_

---

## QA Results

_To be filled by QA agent_
