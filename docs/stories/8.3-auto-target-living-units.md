# Story 8.3: Auto-Target Living Units Only

## Status: Draft

## Story

**As a** player using attack cards,
**I want** to automatically target only living enemies,
**so that** I don't waste attacks on dead enemies or have to manually manage targeting.

## Acceptance Criteria

1. Attack cards auto-target living enemies only (HP > 0)
2. Dead enemies are removed from the battlefield immediately on death
3. If current target dies, auto-select next living enemy
4. Multi-target attacks skip dead enemies
5. Player cannot manually select dead enemies
6. Combat proceeds smoothly without dead enemy bodies lingering

## Tasks / Subtasks

- [ ] Implement dead enemy removal (AC: 2, 6)
  - [ ] Remove enemy from enemies array when HP reaches 0
  - [ ] Trigger death animation before removal
  - [ ] Clean up any status effects on dead enemy
- [ ] Update targeting logic (AC: 1, 3, 5)
  - [ ] Filter target list to living enemies only
  - [ ] Auto-advance target on current target death
  - [ ] Prevent manual selection of dead enemies
- [ ] Update multi-target attacks (AC: 4)
  - [ ] AOE effects only hit living enemies
  - [ ] "Attack all" cards skip dead enemies
- [ ] Update UI (AC: 2, 6)
  - [ ] Death animation plays before entity removal
  - [ ] Enemy slot clears completely

## Dev Notes

### Design Decision
Two options were considered:
1. Keep dead bodies on battlefield (visual clutter, targeting issues)
2. Remove dead enemies immediately after death animation

**Decision: Remove immediately** - cleaner UX, avoids targeting confusion

### Relevant Files
- `src/engine/CombatEngine.ts` - enemy death handling, targeting
- `src/ui/renderer.ts` - enemy rendering, death animations
- `src/main.ts` - selectEnemy function

### Testing
- Test file: `src/engine/CombatEngine.test.ts`
- Add tests for: `should remove enemy from array on death`

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-04 | 1.0 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

_To be filled by Dev agent_

---

## QA Results

_To be filled by QA agent_
