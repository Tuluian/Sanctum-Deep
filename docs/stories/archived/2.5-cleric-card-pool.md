# Story 2.5: Cleric Card Pool Expansion

## Status: Complete

## Story

**As a** Cleric player,
**I want** a full pool of cards to discover during my run,
**so that** I can build diverse decks and explore different strategies.

---

## Narrative Context

> *"My god fell silent three months ago. The prayers that once healed now echo hollow. The church sent me here to find answers. I found something else: the power was never theirs to give. It was always mine."*

**True Name:** Elara Dawnkeeper (suggested default, customizable)

### Why They Entered
The Cleric's god fell silent. Three months of prayers answered only with emptiness. The church elders whispered of the Sanctum—rumors of divine fragments, lost holy power, answers to questions the faithful aren't supposed to ask.

Elara was sent to investigate. The mission was simple: find the source of the silence, restore the connection, return with proof that faith is justified.

The truth is worse: their god was a previous Warden who finally faded. The divine power Elara channeled for years was borrowed from a soul trapped in eternal service. The god didn't die—they were simply... used up.

### What They Learn
Each boss encounter reveals more. The Bonelord worshipped something too—his own legend. The Drowned King sacrificed everything for love, not faith. The Hollow God offers a terrible clarity: faith in something external is always fragile. True power comes from within.

By Act 3, Elara faces a choice: mourn the god they lost, or become something new. The Devotion they build isn't divine—it's self-belief. Taking the Warden's mantle means becoming what they once worshipped.

### Character Arc
- **Act 1:** Faith tested. The god is silent. The prayers still work. How? Why?
- **Act 2:** Faith shattered. The god was mortal. The power was always yours. Now what?
- **Act 3:** Faith reforged. You don't need a god to be holy. You choose to heal. That's enough.

### Personality
Gentle but resolute. Speaks of "we" not "I"—community matters. Heals even when it's not strategic, because it's *right*. Questions faith constantly but never abandons hope. The doubt isn't weakness; it's the foundation of true belief.

### Devotion Mechanic (Narrative Meaning)
Devotion represents commitment—first to their god, then to themselves. The number isn't piety; it's conviction. Early game, Elara builds Devotion through prayer. Late game, they build it through action.

Spending Devotion on powerful effects isn't sacrifice; it's trust. "I have built enough conviction to act decisively."

### Voice Lines (UI/Combat Barks)
- On combat start: "Let there be peace. Or let there be an end."
- On healing: "I choose to mend."
- On gaining Devotion: "My conviction grows."
- On dealing damage: "Forgive me." / "This is mercy."
- On low HP: "The light... I am the light."
- On victory: "Rest now. All of you."

### Warden Dialogue (Class-Specific)
- First meeting: "Ah, a child of faith. Your god was once like me. Bound. Watching. Hoping."
- Act 1 Boss: "Lord Vexal believed in himself above all. There are worse things to believe in."
- Act 2 Entry: "The Drowned King's faith was in his kingdom. What is yours in?"
- Act 3 Entry: "The light you seek is not outside. It never was. Will you become what you worshipped?"

---

## Card Flavor Text Guide

Cards should reflect the journey from external faith to internal strength:

### Early Cards (Divine Language)
- *Smite*: "The light doesn't come from above anymore. It comes from within."
- *Prayer of Mending*: "They taught me to ask for healing. They never said who answers."
- *Shield of Faith*: "I believed the shield was my god's gift. It was always my own will made manifest."

### Mid Cards (Questioning)
- *Holy Fire*: "Fire purifies. It doesn't ask permission."
- *Divine Judgement*: "Who judges the judges? Perhaps... we judge ourselves."
- *Cleansing Light*: "Curses are just wounds of the spirit. Wounds can heal."

### Late Cards (Self-Actualized)
- *Resurrection*: "I asked my god for a miracle. The silence that answered taught me I was the miracle."
- *Avatar of Light*: "I am not the vessel. I am the light."
- *Smite the Wicked*: "This is not divine wrath. This is mine."

---

## Acceptance Criteria

1. Cleric has 30 total cards (4 starter + 26 obtainable)
2. Cards distributed by rarity: 15 Common, 8 Uncommon, 3 Rare
3. Cards support multiple archetypes: Healing/Devotion, Damage, Hybrid
4. Devotion can be spent on certain cards for bonus effects
5. All cards have clear descriptions and balanced stats
6. Cards appear in post-combat rewards based on rarity weights

## Tasks / Subtasks

- [ ] Design Common Cleric cards (15 cards)
  - [ ] **Prayer** (0 Resolve): Heal 4 HP
  - [ ] **Holy Light** (1 Resolve): Deal 4 damage. Heal 2 HP
  - [ ] **Blessed Strike** (1 Resolve): Deal 5 damage. Gain 1 Devotion
  - [ ] **Divine Shield** (1 Resolve): Gain 7 block
  - [ ] **Renew** (1 Resolve): Heal 3 HP at end of turn for 3 turns
  - [ ] **Guiding Light** (1 Resolve): Deal 4 damage. Draw 1 card
  - [ ] **Sanctuary** (1 Resolve): Gain 5 block. Heal 2 HP
  - [ ] **Smite+** (1 Resolve): Deal 8 damage (upgraded Smite)
  - [ ] **Holy Fire** (2 Resolve): Deal 8 damage to all enemies
  - [ ] **Mend Wounds** (1 Resolve): Heal 8 HP
  - [ ] **Cleansing Light** (1 Resolve): Remove 1 debuff. Heal 3 HP
  - [ ] **Radiant Armor** (1 Resolve): Gain 4 block. Gain 2 Devotion
  - [ ] **Fervent Prayer** (0 Resolve): Gain 2 Devotion
  - [ ] **Light's Blessing** (1 Resolve): Heal 5 HP. If at full HP, gain 5 block instead
  - [ ] **Holy Smash** (2 Resolve): Deal 12 damage

- [ ] Design Uncommon Cleric cards (8 cards)
  - [ ] **Martyr's Stance** (1 Resolve, Power): Whenever you heal, gain 1 block
  - [ ] **Divine Judgement** (2 Resolve): Deal 12 damage. If target is Sundered, deal 6 more
  - [ ] **Healing Circle** (2 Resolve): Heal 8 HP. Gain 2 Devotion
  - [ ] **Zealot's Fury** (2 Resolve): Deal 6 damage twice. Lose 4 HP
  - [ ] **Blessed Aura** (2 Resolve, Power): Gain 2 HP at start of each turn
  - [ ] **Purifying Flame** (2 Resolve): Deal 10 damage. Apply Blessed 3 to yourself
  - [ ] **Divine Retribution** (1 Resolve): Deal damage equal to HP lost this combat
  - [ ] **Absolution** (1 Resolve): Spend all Devotion. Heal 2 HP per Devotion spent

- [ ] Design Rare Cleric cards (3 cards)
  - [ ] **Resurrection** (3 Resolve, Exhaust): Heal to full HP. Add 2 Curse cards to deck
  - [ ] **Smite the Wicked** (2 Resolve): Deal 8 damage. Spend 5 Devotion: Deal 20 instead
  - [ ] **Avatar of Light** (3 Resolve, Power): Double all healing. Take 25% more damage

- [ ] Implement all card definitions
  - [ ] Add cards to `src/data/cards/cleric.ts`
  - [ ] Include rarity field on CardDefinition
  - [ ] Implement "Spend Devotion" effect type
  - [ ] Implement "Exhaust" card property

- [ ] Implement new effect types
  - [ ] HEAL_OVER_TIME: Heal X at end of turn for Y turns
  - [ ] DAMAGE_ALL_ENEMIES: Deal X to all enemies
  - [ ] REMOVE_DEBUFF: Remove X debuffs
  - [ ] CONDITIONAL_EFFECT: If condition, do alternate effect
  - [ ] SPEND_DEVOTION: Consume Devotion for bonus
  - [ ] DAMAGE_EQUAL_TO: Deal damage equal to stat (HP lost, Devotion, etc.)

- [ ] Implement Exhaust mechanic
  - [ ] Exhausted cards go to exhaustPile instead of discardPile
  - [ ] Exhausted cards cannot be reshuffled
  - [ ] Show exhaust pile count in UI

- [ ] Implement card rarities in rewards
  - [ ] Common: 70% chance
  - [ ] Uncommon: 25% chance
  - [ ] Rare: 5% chance
  - [ ] Filter rewards by current class

- [ ] Write unit tests
  - [ ] Test each card effect works correctly
  - [ ] Test Devotion spending mechanic
  - [ ] Test exhaust sends card to exhaust pile
  - [ ] Test heal over time triggers each turn
  - [ ] Test conditional effects (full HP, target Sundered, etc.)

## Dev Notes

### Card Rarity System

```typescript
interface CardDefinition {
  // ... existing fields
  rarity: 'common' | 'uncommon' | 'rare';
  classId: CharacterClassId; // Which class can use this card
  exhaust?: boolean; // Card exhausts when played
}
```

### Devotion Spending

```typescript
// New effect type
interface SpendDevotionEffect {
  type: EffectType.SPEND_DEVOTION;
  amount: number; // Devotion required
  bonusEffects: CardEffect[]; // Effects if Devotion spent
}

// Example: Smite the Wicked
effects: [
  { type: EffectType.DAMAGE, amount: 8 },
  {
    type: EffectType.SPEND_DEVOTION,
    amount: 5,
    bonusEffects: [{ type: EffectType.DAMAGE, amount: 12 }] // +12 = 20 total
  }
]
```

### Archetype Support

**Healing/Devotion Build**:
- Prayer, Mend Wounds, Healing Circle, Absolution
- Stack Devotion, cash out with Smite the Wicked or Absolution

**Damage Build**:
- Holy Smash, Divine Judgement, Zealot's Fury, Holy Fire
- Focus on killing enemies fast

**Hybrid/Sustain Build**:
- Martyr's Stance, Blessed Aura, Sanctuary
- Gain block while healing, outlast enemies

### Balance Guidelines

| Rarity | Damage | Block | Heal | Cost |
|--------|--------|-------|------|------|
| Common | 4-8 | 5-8 | 4-8 | 0-2 |
| Uncommon | 10-15 | 10-15 | 8-12 | 1-2 |
| Rare | 15-25 | 15-20 | Full HP | 2-3 |

## Testing

### Test File Location
`src/tests/cards/ClericCards.test.ts`

### Key Test Scenarios

1. **Basic Effects**: Each card does what description says
2. **Devotion Spending**: Smite the Wicked deals 20 when spending 5 Devotion
3. **Conditional**: Light's Blessing gives block at full HP
4. **Exhaust**: Resurrection goes to exhaust pile
5. **HoT**: Renew heals 3 HP for 3 turns
6. **Power**: Martyr's Stance triggers on every heal
7. **AoE**: Holy Fire damages all enemies

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-03 | 1.0 | Initial story creation | James (Dev) |

---

## Dev Agent Record

### Agent Model Used
_To be filled by dev agent_

### Debug Log References
_To be filled by dev agent_

### Completion Notes List
_To be filled by dev agent_

### File List
_To be filled by dev agent_

---

## QA Results
_To be filled by QA agent_
