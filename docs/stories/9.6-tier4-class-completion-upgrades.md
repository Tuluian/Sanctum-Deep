# Story 9.6: Tier 4 Upgrades (Class Completion Rewards)

## Status: Draft

## Story

**As a** player who completed the game with a class,
**I want** to unlock powerful Tier 4 upgrades exclusive to that class,
**so that** finishing the game with each class feels rewarding and meaningful.

## Acceptance Criteria

1. Tier 4 upgrades unlock ONLY after beating the game with a specific class
2. Each class has 3-5 unique Tier 4 upgrades
3. Tier 4 upgrades are significantly more powerful than Tier 1-3
4. Upgrades are thematically tied to class identity
5. Clear UI shows locked Tier 4 upgrades and unlock requirements
6. Progress toward unlock is tracked (e.g., "Beat game with Cleric to unlock")
7. Tier 4 upgrades affect future runs with that class

## Tier 4 Upgrade Examples Per Class

### Cleric (Beat game as Cleric)
| Upgrade | Effect |
|---------|--------|
| **Divine Devotion** | Start each run with 2 Devotion stacks |
| **Saint's Blessing** | Healing cards also grant 1 Block per HP healed |
| **Martyr's Gift** | When HP drops below 25%, fully heal once per run |

### Dungeon Knight (Beat game as Knight)
| Upgrade | Effect |
|---------|--------|
| **Unbreakable** | Start each combat with 10 Block |
| **Fortified Soul** | Fortify stacks persist between combats |
| **Last Stand** | When HP drops to 1, gain 50 Block (once per combat) |

### Diabolist (Beat game as Diabolist)
| Upgrade | Effect |
|---------|--------|
| **Soul Harvest** | Gain 1 HP whenever an enemy dies |
| **Cursed Power** | Pain curses deal damage to enemies too |
| **Demon's Bargain** | Start with a random rare card in hand |

### Oathsworn (Beat game as Oathsworn)
| Upgrade | Effect |
|---------|--------|
| **Eternal Vow** | Vows last +2 turns |
| **Oath of Vengeance** | +50% damage when below 50% HP |
| **Sacred Chains** | Breaking a Vow no longer damages you |

### Fey-Touched (Beat game as Fey-Touched)
| Upgrade | Effect |
|---------|--------|
| **Lucky Star** | Start each combat with 3 Luck |
| **Chaos Mastery** | Whimsy outcomes favor positive results |
| **Trickster's Escape** | Once per run, negate a killing blow |

### Celestial (Beat game as Celestial)
| Upgrade | Effect |
|---------|--------|
| **Radiant Aura** | Start combat with 3 Radiance |
| **Divine Form Extended** | Divine Form lasts +2 turns |
| **Heaven's Light** | Deal +2 damage while in Divine Form |

### Summoner (Beat game as Summoner)
| Upgrade | Effect |
|---------|--------|
| **Spirit Bond** | Minions have +10 max HP |
| **Soul Tether** | When a minion dies, gain 5 Block |
| **Eternal Companions** | Start with a Wisp already summoned |

### Bargainer (Beat game as Bargainer)
| Upgrade | Effect |
|---------|--------|
| **Collector's Due** | +25% gold from all sources |
| **Fine Print** | Prices reduce damage you take by 1 each |
| **The Big Deal** | Once per run, play a card for free |

## Tasks / Subtasks

- [ ] Define Tier 4 upgrades for all 8 classes (AC: 2, 4)
  - [ ] 3-5 upgrades per class
  - [ ] Thematically appropriate
  - [ ] Meaningfully powerful
- [ ] Implement unlock system (AC: 1, 6)
  - [ ] Track class completion
  - [ ] Gate Tier 4 behind completion
  - [ ] Show progress UI
- [ ] Implement upgrade effects (AC: 3, 7)
  - [ ] Apply on run start
  - [ ] Integrate with class mechanics
- [ ] Create Tier 4 UI section (AC: 5)
  - [ ] Locked state with requirements
  - [ ] Unlocked state with selection
  - [ ] Visual distinction (gold/legendary style)
- [ ] Balance testing (AC: 3)
  - [ ] Ensure powerful but not broken
  - [ ] Test interaction with existing mechanics

## Dev Notes

### Unlock Tracking

```typescript
interface ClassProgress {
  classId: string;
  completions: number;      // Times beaten game with this class
  tier4Unlocked: boolean;   // True after first completion
  tier4Upgrades: string[];  // Selected upgrades
}
```

### Power Level Guidelines
- Tier 1 (Combat): +2 damage, +3 block
- Tier 2 (Run): +5 HP, start with 1 status
- Tier 3 (Permanent): +3 HP, 5% gold bonus
- **Tier 4 (Mastery): +10 HP, start with 2 status, unique effects**

Tier 4 should feel like "mastery rewards" - you've proven skill with the class, now you get power to match.

### Relevant Files
- `src/types/upgrades.ts` - add Tier 4 definitions
- `src/services/ProgressionService.ts` - track completions
- `src/services/UpgradeService.ts` - apply Tier 4 effects
- `src/ui/screens/UpgradeScreen.ts` - Tier 4 section

### Narrative Tie-In
From World Bible: Each class has a journey through the Sanctum. Tier 4 represents having completed that journeyâ€”you've proven yourself, and the Sanctum acknowledges your mastery.

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-04 | 1.0 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

_To be filled by Dev agent_

---

## QA Results

_To be filled by QA agent_
