/**
 * Achievement Definitions
 * 50 achievements across 4 categories with Soul Echo rewards
 */

import { Achievement, AchievementTier } from '@/types/achievements';
import { CharacterClassId } from '@/types';

export const ACHIEVEMENTS: Achievement[] = [
  // ============================================
  // COMBAT ACHIEVEMENTS (15)
  // ============================================

  // Bronze
  {
    id: 'first_blood',
    name: 'First Blood',
    description: 'Win your first combat.',
    flavorText: '"Your first enemy falls. They were someone once. Now they\'re nothing. Victory tastes strange here."',
    tier: AchievementTier.BRONZE,
    category: 'combat',
    hidden: false,
    condition: { type: 'combat_wins', count: 1 },
    icon: 'ðŸ—¡ï¸',
  },
  {
    id: 'overkill',
    name: 'Overkill',
    description: 'Deal 50+ damage in a single attack.',
    flavorText: '"That was... excessive. The Sanctum appreciates efficiency, but respects enthusiasm."',
    tier: AchievementTier.BRONZE,
    category: 'combat',
    hidden: false,
    condition: { type: 'damage_single_attack', amount: 50 },
    icon: 'ðŸ’¥',
  },

  // Silver
  {
    id: 'untouchable',
    name: 'Untouchable',
    description: 'Win a combat without taking damage.',
    flavorText: '"Untouchable. For one fight, at least. The next one will test you differently."',
    tier: AchievementTier.SILVER,
    category: 'combat',
    hidden: false,
    condition: { type: 'combat_win_no_damage' },
    icon: 'ðŸ›¡ï¸',
  },
  {
    id: 'massacre',
    name: 'Massacre',
    description: 'Defeat 3+ enemies in a single turn.',
    flavorText: '"Three fell before they could blink. The Sanctum noticed. It doesn\'t approve, but it noticed."',
    tier: AchievementTier.SILVER,
    category: 'combat',
    hidden: false,
    condition: { type: 'enemies_defeated_single_turn', count: 3 },
    icon: 'âš”ï¸',
  },
  {
    id: 'perfect_defense',
    name: 'Perfect Defense',
    description: 'Block 100+ damage in a single combat.',
    flavorText: '"The wall that would not fall. This is what it means to hold the line."',
    tier: AchievementTier.SILVER,
    category: 'combat',
    hidden: false,
    condition: { type: 'block_in_combat', amount: 100 },
    icon: 'ðŸ°',
  },
  {
    id: 'devoted',
    name: 'Faith Made Manifest',
    description: 'Reach 20 Devotion in a single combat.',
    flavorText: '"Your faith became something physical. Something powerful. For a moment, you understood what gods feel like."',
    tier: AchievementTier.SILVER,
    category: 'combat',
    hidden: false,
    condition: { type: 'reach_devotion', amount: 20 },
    icon: 'âœ¨',
  },
  {
    id: 'unbreakable_wall',
    name: 'The Wall That Would Not Fall',
    description: 'Have 15 Fortify for 5 consecutive turns.',
    flavorText: '"The line held. You held. This is what the Order of the Sealed Gate means. Not glory. Not victory. Just... holding."',
    tier: AchievementTier.SILVER,
    category: 'combat',
    hidden: false,
    condition: { type: 'maintain_fortify', amount: 15, turns: 5 },
    icon: 'ðŸ§±',
  },
  {
    id: 'contract_fulfilled',
    name: 'Debt Management',
    description: 'Have 10+ Curses in deck and win combat.',
    flavorText: '"You balanced on the edge of damnation and pulled back. Xan\'thrax is impressed. Demons are rarely impressed."',
    tier: AchievementTier.SILVER,
    category: 'combat',
    hidden: false,
    condition: { type: 'win_with_curses', count: 10 },
    icon: 'ðŸ“œ',
  },
  {
    id: 'oath_keeper',
    name: 'Word of Honor',
    description: 'Complete a combat without breaking a Vow.',
    flavorText: '"You swore. You kept your word. In a place where identity dissolves, keeping your word means keeping yourself."',
    tier: AchievementTier.SILVER,
    category: 'combat',
    hidden: false,
    condition: { type: 'combat_without_breaking_vow' },
    icon: 'ðŸ¤',
  },
  {
    id: 'chaos_master',
    name: 'Oberon Smiled',
    description: 'Trigger 10 Whimsy effects in one combat.',
    flavorText: '"Against all odds. Against all probability. Oberon likes you today. He won\'t like you tomorrow. Enjoy it."',
    tier: AchievementTier.SILVER,
    category: 'combat',
    hidden: false,
    condition: { type: 'whimsy_triggers_in_combat', count: 10 },
    icon: 'ðŸŽ²',
  },
  {
    id: 'pacifist_turn',
    name: 'Pacifist\'s Path',
    description: 'Win a combat where you dealt 0 damage on final turn.',
    flavorText: '"Victory without violence. The Sanctum respects restraintâ€”even as it tries to kill you."',
    tier: AchievementTier.SILVER,
    category: 'combat',
    hidden: false,
    condition: { type: 'win_no_damage_final_turn' },
    icon: 'â˜®ï¸',
  },

  // Gold
  {
    id: 'glass_cannon',
    name: 'Glass Cannon',
    description: 'Win a combat with 1 HP remaining.',
    flavorText: '"One hit from death. One mistake from oblivion. And yet, you won. The line between victory and defeat is thinner than you think."',
    tier: AchievementTier.GOLD,
    category: 'combat',
    hidden: false,
    condition: { type: 'win_with_hp', hp: 1 },
    icon: 'ðŸ’€',
  },
  {
    id: 'speedrunner',
    name: 'No Time to Think',
    description: 'Win a combat in 3 turns or fewer.',
    flavorText: '"You moved faster than thought. The Sanctum barely noticed you. That\'s either impressive or insulting. Probably both."',
    tier: AchievementTier.GOLD,
    category: 'combat',
    hidden: false,
    condition: { type: 'win_in_turns', turns: 3 },
    icon: 'âš¡',
  },

  // Platinum
  {
    id: 'no_cards_needed',
    name: 'Nothing But Willpower',
    description: 'Win a combat playing only 5 cards total.',
    flavorText: '"Five cards. That\'s all it took. Efficiency incarnate. The Sanctum wonders what else you don\'t need."',
    tier: AchievementTier.PLATINUM,
    category: 'combat',
    hidden: false,
    condition: { type: 'win_with_cards_played', count: 5 },
    icon: 'ðŸŽ¯',
  },
  {
    id: 'untouched_act1',
    name: 'Untouched',
    description: 'Complete Act 1 without taking any damage.',
    flavorText: '"An entire act. Not a scratch. Either you\'re very good, or Act 1 is very easy. The Sanctum is betting on the latter."',
    tier: AchievementTier.PLATINUM,
    category: 'combat',
    hidden: false,
    condition: { type: 'complete_act', act: 1 },
    icon: 'ðŸ‘»',
  },

  // ============================================
  // RUN ACHIEVEMENTS (15)
  // ============================================

  // Bronze
  {
    id: 'dungeon_delver',
    name: 'Welcome to the Sanctum',
    description: 'Complete your first run (win or lose).',
    flavorText: '"You\'ve learned the basics. The Sanctum taught thousands before you. Few graduated to the advanced courses."',
    tier: AchievementTier.BRONZE,
    category: 'run',
    hidden: false,
    condition: { type: 'complete_run' },
    icon: 'ðŸšª',
  },
  {
    id: 'survivor',
    name: 'The Pride Before',
    description: 'Complete Act 1.',
    flavorText: '"Lord Vexal, the Bonelord, falls. His pride built this kingdom. His pride destroyed it. What does your pride build?"',
    loreUnlock: '"Before the Bonelord was the Bonelord, he was Lord Vexal of the Silver Peaks. He entered the Sanctum seeking immortality. He found itâ€”in a way."',
    tier: AchievementTier.BRONZE,
    category: 'run',
    hidden: false,
    condition: { type: 'complete_act', act: 1 },
    icon: 'ðŸ’€',
  },
  {
    id: 'wealthy',
    name: 'Golden Hoard',
    description: 'Finish a run with 500+ gold.',
    flavorText: '"Gold means nothing to the dead. But you\'re not dead yet, are you?"',
    tier: AchievementTier.BRONZE,
    category: 'run',
    hidden: false,
    condition: { type: 'gold_at_run_end', amount: 500 },
    icon: 'ðŸ’°',
  },
  {
    id: 'potion_master',
    name: 'Alchemist\'s Touch',
    description: 'Use 10 potions in a single run.',
    flavorText: '"Ten potions. You either found many or needed many. The Sanctum doesn\'t judge. Much."',
    tier: AchievementTier.BRONZE,
    category: 'run',
    hidden: false,
    condition: { type: 'potions_used_in_run', count: 10 },
    icon: 'ðŸ§ª',
  },

  // Silver
  {
    id: 'deep_diver',
    name: 'Drowned Memories',
    description: 'Complete Act 2.',
    flavorText: '"King Aldric loved too much. He drowned a kingdom for that love. Now he\'s finally at peace. Or what passes for peace here."',
    loreUnlock: '"Queen Elara didn\'t die in childbirth. She died in the Sanctumâ€”as a Warden. Aldric flooded his kingdom trying to reach her. He never did."',
    tier: AchievementTier.SILVER,
    category: 'run',
    hidden: false,
    condition: { type: 'complete_act', act: 2 },
    icon: 'ðŸŒŠ',
  },
  {
    id: 'minimalist',
    name: 'Traveling Light',
    description: 'Win a run with 15 or fewer cards in deck.',
    flavorText: '"Fifteen cards. No fat. No waste. Just purpose. The Sanctum respects minimalism."',
    tier: AchievementTier.SILVER,
    category: 'run',
    hidden: false,
    condition: { type: 'deck_size_at_win', comparison: 'lte', size: 15 },
    icon: 'ðŸ“¦',
  },
  {
    id: 'hoarder',
    name: 'Collector',
    description: 'Win a run with 40+ cards in deck.',
    flavorText: '"Forty cards. You took everything. The Sanctum wonders if you\'re prepared or just indecisive."',
    tier: AchievementTier.SILVER,
    category: 'run',
    hidden: false,
    condition: { type: 'deck_size_at_win', comparison: 'gte', size: 40 },
    icon: 'ðŸ“š',
  },
  {
    id: 'relic_hunter',
    name: 'Relic Hunter',
    description: 'Collect 10 relics in a single run.',
    flavorText: '"Ten relics. Ten pieces of someone else\'s story. You carry their hopes now."',
    tier: AchievementTier.SILVER,
    category: 'run',
    hidden: false,
    condition: { type: 'relics_in_run', count: 10 },
    icon: 'ðŸº',
  },
  {
    id: 'elite_slayer',
    name: 'Elite Slayer',
    description: 'Defeat 5 elite enemies in a single run.',
    flavorText: '"Five elites. The Sanctum\'s guardians. They were supposed to stop you. They didn\'t."',
    tier: AchievementTier.SILVER,
    category: 'run',
    hidden: false,
    condition: { type: 'elites_defeated_in_run', count: 5 },
    icon: 'ðŸ‘¹',
  },
  {
    id: 'shrine_pilgrim',
    name: 'Shrine Pilgrim',
    description: 'Visit every shrine in a single run.',
    flavorText: '"Every shrine. Every blessing. Every curse. You experienced it all."',
    tier: AchievementTier.SILVER,
    category: 'run',
    hidden: false,
    condition: { type: 'all_shrines_visited' },
    icon: 'â›©ï¸',
  },

  // Gold
  {
    id: 'sanctum_breaker',
    name: 'The Hollow Victory',
    description: 'Defeat the Hollow God.',
    flavorText: '"The Hollow God falls. But does it? Can you truly defeat emptiness? The answer is complicated."',
    tier: AchievementTier.GOLD,
    category: 'run',
    hidden: false,
    condition: { type: 'defeat_boss', bossId: 'hollow_god' },
    icon: 'ðŸ‘ï¸',
  },
  {
    id: 'speedrun',
    name: 'Lightning Rush',
    description: 'Complete a winning run in under 20 minutes.',
    flavorText: '"Twenty minutes. The Sanctum barely noticed you. Speed is its own kind of victory."',
    tier: AchievementTier.GOLD,
    category: 'run',
    hidden: false,
    condition: { type: 'run_time', minutes: 20 },
    icon: 'â±ï¸',
  },
  {
    id: 'cursed_victor',
    name: 'Curse Breaker',
    description: 'Win with 5+ Curses in deck.',
    flavorText: '"Five curses. And still you won. The Sanctum is... impressed? Concerned? Both."',
    tier: AchievementTier.GOLD,
    category: 'run',
    hidden: false,
    condition: { type: 'curses_in_deck_at_win', count: 5 },
    icon: 'ðŸ”®',
  },
  {
    id: 'boss_rush',
    name: 'No Rest for the Wicked',
    description: 'Defeat all 3 bosses without resting at campfires.',
    flavorText: '"No rest. No respite. Just forward. The Sanctum admires your determination. It will kill you anyway."',
    tier: AchievementTier.GOLD,
    category: 'run',
    hidden: false,
    condition: { type: 'no_campfire_rest' },
    icon: 'ðŸƒ',
  },

  // Platinum
  {
    id: 'perfect_run',
    name: 'Flawless',
    description: 'Win a run without ever dying (no Ankh Talisman).',
    flavorText: '"Perfect. Absolutely perfect. The Sanctum has nothing more to teach you. Now it has to kill you."',
    tier: AchievementTier.PLATINUM,
    category: 'run',
    hidden: false,
    condition: { type: 'win_without_ankh' },
    icon: 'ðŸ†',
  },

  // ============================================
  // CLASS ACHIEVEMENTS (10, 2 per class)
  // ============================================

  // Cleric
  {
    id: 'holy_warrior',
    name: 'The Last Believer',
    description: 'Win a run as Cleric.',
    flavorText: '"Elara found her god. They were a Warden. They gave everything for mortals who never knew. Faith isn\'t about answers. It\'s about trying."',
    loreUnlock: '"Elara\'s godâ€”the Divine Light of the Eternal Dawnâ€”was the third Warden. They held the Sanctum for 891 years. Their followers never knew where they went."',
    tier: AchievementTier.SILVER,
    category: 'class',
    hidden: false,
    condition: { type: 'win_as_class', classId: CharacterClassId.CLERIC },
    icon: 'â›ª',
  },
  {
    id: 'divine_ascension',
    name: 'Divine Ascension',
    description: 'Win 5 runs as Cleric.',
    flavorText: '"Five journeys of faith. Five returns from darkness. The Light sees you now."',
    tier: AchievementTier.GOLD,
    category: 'class',
    hidden: false,
    condition: { type: 'wins_with_class', classId: CharacterClassId.CLERIC, count: 5 },
    icon: 'ðŸ‘¼',
  },

  // Dungeon Knight
  {
    id: 'shield_bearer',
    name: 'Legacy Fulfilled',
    description: 'Win a run as Dungeon Knight.',
    flavorText: '"Ser Varren found Ser Aldricâ€”or what remained. The seal passes on. The line continues. That\'s what matters."',
    loreUnlock: '"Ser Aldric was the greatest Knight of his generation. He lasted longer in the Sanctum than any Knight beforeâ€”87 minutes. Most don\'t last 40."',
    tier: AchievementTier.SILVER,
    category: 'class',
    hidden: false,
    condition: { type: 'win_as_class', classId: CharacterClassId.DUNGEON_KNIGHT },
    icon: 'ðŸ›¡ï¸',
  },
  {
    id: 'immovable_object',
    name: 'Immovable Object',
    description: 'Win 5 runs as Dungeon Knight.',
    flavorText: '"Five times the wall held. Five times the darkness broke against you. The Order remembers."',
    tier: AchievementTier.GOLD,
    category: 'class',
    hidden: false,
    condition: { type: 'wins_with_class', classId: CharacterClassId.DUNGEON_KNIGHT, count: 5 },
    icon: 'ðŸ°',
  },

  // Diabolist
  {
    id: 'soul_trader',
    name: 'The Debt Unpaid',
    description: 'Win a run as Diabolist.',
    flavorText: '"Mordecai found a loophole. Demons hate loopholesâ€”when mortals find them. Xan\'thrax is furious. Xan\'thrax can stay furious."',
    loreUnlock: '"Xan\'thrax has made 10,847 contracts with mortals entering the Sanctum. Mordecai is the fourth to break their contract. The other three... had help."',
    tier: AchievementTier.SILVER,
    category: 'class',
    hidden: false,
    condition: { type: 'win_as_class', classId: CharacterClassId.DIABOLIST },
    icon: 'ðŸ˜ˆ',
  },
  {
    id: 'lord_of_contracts',
    name: 'Lord of Contracts',
    description: 'Win 5 runs as Diabolist.',
    flavorText: '"Five escapes from damnation. Xan\'thrax watches you now. Not with anger. With respect. That\'s worse."',
    tier: AchievementTier.GOLD,
    category: 'class',
    hidden: false,
    condition: { type: 'wins_with_class', classId: CharacterClassId.DIABOLIST, count: 5 },
    icon: 'ðŸ‘¿',
  },

  // Oathsworn
  {
    id: 'vow_fulfilled',
    name: 'The Questions That Matter',
    description: 'Win a run as Oathsworn.',
    flavorText: '"Callista questioned everything the Order taught her. She found that questions are stronger than answers. The Order won\'t like that."',
    loreUnlock: '"The Order of the Burning Truth was founded by Lyraâ€”the current Warden. She intended it to prevent anyone else from having to sacrifice themselves. She failed."',
    tier: AchievementTier.SILVER,
    category: 'class',
    hidden: false,
    condition: { type: 'win_as_class', classId: CharacterClassId.OATHSWORN },
    icon: 'ðŸ“–',
  },
  {
    id: 'eternal_oath',
    name: 'Eternal Oath',
    description: 'Win 5 runs as Oathsworn.',
    flavorText: '"Five oaths fulfilled. The Order\'s teachings are yours nowâ€”to keep or to break."',
    tier: AchievementTier.GOLD,
    category: 'class',
    hidden: false,
    condition: { type: 'wins_with_class', classId: CharacterClassId.OATHSWORN, count: 5 },
    icon: 'ðŸ”¥',
  },

  // Fey-Touched
  {
    id: 'touched_by_chaos',
    name: 'The Game Breaks',
    description: 'Win a run as Fey-Touched.',
    flavorText: '"Wren played Oberon\'s game and won. The Fey King doesn\'t know what to do with that. Neither does Wren. But she\'s free."',
    loreUnlock: '"Oberon has marked 347 mortals over the millennia. Only seven survived the Sanctum. Only Wren defeated the game entirely. Oberon hasn\'t stopped watching."',
    tier: AchievementTier.SILVER,
    category: 'class',
    hidden: false,
    condition: { type: 'win_as_class', classId: CharacterClassId.FEY_TOUCHED },
    icon: 'ðŸ§š',
  },
  {
    id: 'chaos_incarnate',
    name: 'Chaos Incarnate',
    description: 'Win 5 runs as Fey-Touched.',
    flavorText: '"Five games played. Five games won. Oberon is either furious or fascinated. With fey, those are the same thing."',
    tier: AchievementTier.GOLD,
    category: 'class',
    hidden: false,
    condition: { type: 'wins_with_class', classId: CharacterClassId.FEY_TOUCHED, count: 5 },
    icon: 'ðŸŒ€',
  },

  // ============================================
  // SECRET ACHIEVEMENTS (10, hidden until unlocked)
  // ============================================

  {
    id: 'wardens_chosen',
    name: 'The Eternal Watch',
    description: '???',
    flavorText: '"You chose to stay. To hold the line. To become what the Warden was. For how many centuries, I wonder?"',
    loreUnlock: '"The average Warden lasts 412 years before fading. The longest was 2,103 years. The shortest was 3 days. They tried to leave after becoming Warden. The Sanctum didn\'t let them."',
    tier: AchievementTier.PLATINUM,
    category: 'secret',
    hidden: true,
    condition: { type: 'become_warden_all_classes' },
    icon: 'ðŸ”®',
  },
  {
    id: 'true_ending',
    name: 'The Garden of Becoming',
    description: '???',
    flavorText: '"You didn\'t defeat the Hollow God. You healed it. You gave it what it neededâ€”identity. Purpose. The cycle is broken. The garden grows."',
    loreUnlock: '"The True Ending requires all five paths. It requires understanding that the Hollow God isn\'t evilâ€”it\'s wounded. A cosmic wound that never healed. You gave it memory. You gave it meaning. You gave it peace."',
    tier: AchievementTier.PLATINUM,
    category: 'secret',
    hidden: true,
    condition: { type: 'true_ending' },
    icon: 'ðŸŒ¸',
  },
  {
    id: 'mercy',
    name: 'Compassion',
    description: '???',
    flavorText: '"You showed mercy to something that would not show it to you. The Sanctum remembers kindness. It doesn\'t reward itâ€”but it remembers."',
    tier: AchievementTier.SILVER,
    category: 'secret',
    hidden: true,
    condition: { type: 'spare_enemy' },
    icon: 'ðŸ’š',
  },
  {
    id: 'gambler',
    name: 'Fortune\'s Favorite',
    description: '???',
    flavorText: '"Five times luck saved you. Oberon is either blessing you or setting you up. With fey, those are the same thing."',
    tier: AchievementTier.SILVER,
    category: 'secret',
    hidden: true,
    condition: { type: 'luck_decided_wins', count: 5 },
    icon: 'ðŸ€',
  },
  {
    id: 'sacrifice',
    name: 'Final Sacrifice',
    description: '???',
    flavorText: '"You used the ultimate price. Soul for victory. The demons are watching. They like what they see."',
    tier: AchievementTier.GOLD,
    category: 'secret',
    hidden: true,
    condition: { type: 'final_sacrifice_kill' },
    icon: 'ðŸ©¸',
  },
  {
    id: 'memory_keeper',
    name: 'Before the Beginning',
    description: '???',
    flavorText: '"Before there was a Sanctum, there was a Warden. Before there was a Warden, there was a mistake. The First Warden created the Hollow Godâ€”by accident."',
    loreUnlock: '"The First Warden was a mage named Theris who sought godhood. He poured too much identity into himselfâ€”and the overflow became the void. The Sanctum was built to contain his mistake. He guards it still, in the deepest crystal."',
    tier: AchievementTier.SILVER,
    category: 'secret',
    hidden: true,
    condition: { type: 'all_memory_fragments' },
    icon: 'ðŸ§ ',
  },
  {
    id: 'friend_of_warden',
    name: 'Consistent',
    description: '???',
    flavorText: '"You made the same choice. Again and again. The Warden notices patterns. They\'ve been watching you for a while."',
    tier: AchievementTier.SILVER,
    category: 'secret',
    hidden: true,
    condition: { type: 'same_dialogue_choice', count: 10 },
    icon: 'ðŸ”„',
  },
  {
    id: 'against_all_odds',
    name: 'Against All Odds',
    description: '???',
    flavorText: '"Empty draw pile. Empty hope. And yet. Victory. The Sanctum has no words. Just... acknowledgment."',
    tier: AchievementTier.GOLD,
    category: 'secret',
    hidden: true,
    condition: { type: 'win_with_empty_draw_pile' },
    icon: 'ðŸŽ´',
  },
  {
    id: 'one_with_nothing',
    name: 'Pure',
    description: '???',
    flavorText: '"You won with only what you started with. No additions. No corruption. Just... you. The Sanctum respects purityâ€”even as it tries to taint it."',
    tier: AchievementTier.PLATINUM,
    category: 'secret',
    hidden: true,
    condition: { type: 'win_with_starter_cards_only' },
    icon: 'âšª',
  },
  {
    id: 'hollow_victory',
    name: 'Corrupted Champion',
    description: '???',
    flavorText: '"You defeated the Hollow God while carrying its corruption. You proved that darkness can be wielded, not just endured."',
    tier: AchievementTier.GOLD,
    category: 'secret',
    hidden: true,
    condition: { type: 'hollow_god_with_corruption', stacks: 10 },
    icon: 'ðŸ–¤',
  },
];

// Helper functions
export function getAchievementById(id: string): Achievement | undefined {
  return ACHIEVEMENTS.find((a) => a.id === id);
}

export function getAchievementsByCategory(category: AchievementCategory): Achievement[] {
  return ACHIEVEMENTS.filter((a) => a.category === category);
}

export function getAchievementsByTier(tier: AchievementTier): Achievement[] {
  return ACHIEVEMENTS.filter((a) => a.tier === tier);
}

export function getTotalPossibleSoulEchoes(): number {
  return ACHIEVEMENTS.reduce((total, a) => total + SOUL_ECHO_REWARDS[a.tier], 0);
}

// Import for category type
import type { AchievementCategory } from '@/types/achievements';
import { SOUL_ECHO_REWARDS } from '@/types/achievements';
